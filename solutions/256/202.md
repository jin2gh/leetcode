## [快乐数](https://leetcode-cn.com/problems/happy-number/)

### 题解
+ [PY3](../../py3/256/202.py)

#### 模拟 + 哈希表
**思路**
对于数字 n，每一位（最大 9）的平方和，最大平方和应该是 81 乘以位数个数。根据 n 的取值范围 [1, 2³¹ - 1]，最大平方和不会超过 81 * 10 = 810（`2³¹ - 1` 有 10 位）。810 是 3 位数，而最大的 3 位数 999，平方和是 81 * 3 = 243。可见，大部分情况下，最大平方和都不会超过 243。  

模拟快乐数的计算方式，用哈希表记录已经计算过的数字，如果出现重复的数字，说明进入一个循环，不是快乐数。

**复杂度分析**
+ 时间复杂度：O(logn)。
  - 对每一位上的数取平方和函数的时间复杂度为 O(logn)。
  - 对于小于 243 的数，平方和不会再超过 243，最大时间复杂度为 O(243 * 3)；
  - 对于位数较长的数，经过取值函数后，也会变成 243 及以下的数，而这个过程占用时间为 O(logn + loglogn + ...)，可以看作是 O(logn)。
+ 空间复杂度：O(logn)。
  - 大部分情况下，计算的平方和不会超过 243，空间复杂度为 O(1)。
  - 对于大的数，大部分空间将由 n 本身占用，最多占用 O(logn)。