## [石子游戏 IX](https://leetcode.cn/problems/stone-game-ix/)
### 题解
+ [TS](../../ts/2048/2029.ts)

#### 构造
**思路**
如果石头数量只有 1 个，因为没有石头剩余，B 获胜（Alice 简称 A，Bob 简称 B）。
将题目中的石头，按 3 取余的值分为 3 种类型 `0, 1, 2`，统计石头数 `c0, c1, c2`。
0 类石头，对移除的总和取余 3 的值没有影响，可以看作是【先后手】交换。
在只有1、2 类的情况下，A 先手有两种选择：
1. A 先选 1，B 必选 1，A 必选 2，B 必选 1，递推后续情况，A 一直选 2，B 一直选 1，得到序列：`112121...`
2. A 先选 2，B 必选 2，A 必选 1，B 必选 2，递推后续情况，A 一直选 1，B 一直选 2，得到序列：`221212...`

A 选择方法 1 时，有以下几种情况（中断说明移除的石头能被 3 整除）：
+ `c1 = 1, c2 >= 1`，A 胜；
+ `c1 >= 2` 时，
  - 如果 `c1 <= c2`，会因为 B 无法选择 1 而中断，A 胜；
  - 如果 `c1 > c2`：
    - `c1 - c2 <= 2`，B 会因为没有剩余石头获胜；
    - `c1 - c2 > 2`，会因为 A 无法选择 2 而中断，B 胜。

A 获胜的条件是：`c1 <= c2` 并且 `c1 >= 1, c2 >= 1` 。

根据方法 1，推理 A 选择方法 2 时，A 获胜的条件是：`c1 >= c2` 并且 `c1 >= 1, c2 >= 1`。结合两个方法，A 获胜的条件是 `c1 >= 1, c2 >= 1`。

在满足 A 获胜的条件下，只需要考虑 A 和 B 是否交换，即 `c0` 的奇偶：
+ 当 `c0` 为偶数时，相当于没有 `c0`，也就是没有交换；
+ 当 `c0` 为奇数时，A 和 B 的先后次序交换，A 的获胜情况变成了“B 因为序列中断获胜的情况”，也就是方法 1 中的 `c1 - c2 > 2`或方法 2 中的 `c2 - c1 > 2`。

**复杂度分析**
+ 时间复杂度：O(n)。
+ 空间复杂度：O(1)。